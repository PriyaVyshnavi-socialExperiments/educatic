<ion-content>
    <ion-grid>
        <ion-row>
            <ion-col>
                <ion-list>
                    <ion-item>
                        <ion-label>City</ion-label>
                        <ion-select placeholder="Select One" multiple="true" [(ngModel)]="this.cities" (ionChange)="changeCities()">
                        <ion-select-option *ngFor="let city of this.allCities" [value]="city">{{city.name}}</ion-select-option>
                        </ion-select>
                    </ion-item>
                    
                    <ion-item>
                        <ion-label>School</ion-label>
                        <ion-select [interfaceOptions]="{'cssClass': 'filter-wider-popover'}" placeholder="Select One" multiple="true" [(ngModel)]="this.schools" (ionChange)="changeSchools()">
                        <ion-select-option *ngFor="let school of allSchools" [value]="school" >{{school.name}} - {{school.city}}</ion-select-option>
                        </ion-select>
                    </ion-item>
                    
                    <ion-item>
                        <ion-label>Class</ion-label>
                        <ion-select [interfaceOptions]="{'cssClass': 'filter-wider-popover'}" placeholder="Select One" multiple="true" [(ngModel)]="this.classes" (ionChange)="changeClasses()">
                        <ion-select-option *ngFor="let class of allClasses" [value]="class">{{class.name}} - {{class.school}}</ion-select-option>
                        </ion-select>
                    </ion-item>
                    <ion-item>
                        <ion-label>Start Date</ion-label>
                        <ion-datetime [(ngModel)]="this.startDate" placeholder="Select Date" (ionChange)="changeStartDate($event)"></ion-datetime>
                    </ion-item>
                    <ion-item>
                        <ion-label>End Date</ion-label>
                        <ion-datetime [(ngModel)]="this.endDate" placeholder="Select Date" (ionChange)="changeEndDate(value)"></ion-datetime>
                    </ion-item>    
                </ion-list>
            </ion-col>
        </ion-row>
        <ion-row class="top-row">
            <ion-col size="6" size-sm="3">
                <ion-card>
                    #Total Schools
                    <br>
                    <span>{{this.totalSchools}}</span>
                    <br>
                    #Active Schools 
                    <br>
                    <span>{{this.activeSchools}}</span>
                    <br>
                </ion-card>
            </ion-col>
            <ion-col size="6" size-sm="3">
                <ion-card >
                    #Total Teachers
                    <br>
                    <span>{{this.totalTeachers}}</span>
                    <br>
                    #Active Teachers
                    <br>
                    <span>{{this.activeTeachers}}</span>
                    <br>
                </ion-card>
            </ion-col>
            <ion-col size="6" size-sm="3">
                <ion-card>
                    #Total Students
                    <br>
                    <span>{{this.totalStudents}}</span>
                    <br>
                    #Active Students
                    <br>
                    <span>{{this.activeStudents}}</span>
                    <br>
                </ion-card>
            </ion-col>
            <ion-col size="6" size-sm="3">
                <ion-card>
                    #Total Classes
                    <br>
                    <span>{{this.totalClasses}}</span>
                    <br>
                    #Active Classes
                    <br>
                    <span>{{this.activeClasses}}</span>
                    <br>
                </ion-card>
            </ion-col>
            <ion-col size="12">
                <ion-card (click)="presentModal(this.charts['class-attendance'], 'line')" >
                    <canvas id="class-attendance"></canvas>
                </ion-card>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col size="12" size-sm="6">
                <ion-card>
                    <agm-map>
                        <agm-marker></agm-marker>
                    </agm-map>
                </ion-card>
            </ion-col>
            <ion-col size="12" size-sm="6">
                <ion-card (click)="presentModal(this.charts['student-enrollment'], 'line')">
                    <canvas id="student-enrollment"></canvas>>
                </ion-card>
            </ion-col>
        </ion-row>
        <ion-row class="bottom-row">
            <ion-col size="12" size-sm="4">
                <ion-card (click)="presentModal(this.charts['city-attendance'], 'bar')" >
                   <canvas id="city-attendance"></canvas>
                </ion-card>
            </ion-col>
            <ion-col size="12" size-sm="4">
                <ion-card (click)="presentModal(this.charts['school-attendance'], 'bar')" >
                    <canvas id="school-attendance"></canvas>
                </ion-card>
            </ion-col>
            <ion-col size="12" size-sm="4">
                <ion-card (click)="presentModal(this.charts['gender-attendance'], 'bar')" >
                    <canvas id="gender-attendance"></canvas>
                </ion-card>
            </ion-col>
        </ion-row>
        <ion-row class="ion-align-items-center">
            <ion-col size="12" size-sm="12">
                <ion-card style="overflow: scroll">
                    Classes by #attendance 
                    <ion-grid>
                        <ion-row style="text-align: left;">
                            <ion-col>
                                City
                            </ion-col>
                            <ion-col>
                                School
                            </ion-col>
                            <ion-col>
                                Class
                            </ion-col>
                            <ion-col>
                                Attendance 
                            </ion-col>
                            <ion-col>
                                #Students 
                            </ion-col>
                            <ion-col>
                                #Teachers
                            </ion-col>
                        </ion-row>
                        <ion-row *ngFor="let class of this.classes">
                            <ion-col>
                                {{class.city}}
                            </ion-col>
                            <ion-col>
                                {{class.school}}
                            </ion-col>
                            <ion-col>
                                {{class.name}}
                            </ion-col>
                            <ion-col>
                                {{this.dashboardService.getCumulativeAttendance(class, "classes", this.start, this.end)}}%
                            </ion-col>
                            <ion-col>
                                {{class.students.length}}
                            </ion-col>
                            <ion-col>
                                {{class.numTeachers}}
                            </ion-col>
                        </ion-row>
                      </ion-grid>
                </ion-card>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col size="12" size-sm="6">
                <ion-card>
                    Schools with low attendance
                </ion-card>
            </ion-col>
            <ion-col size="12" size-sm="6">
                <ion-card>
                    Schools with high attendance
                </ion-card>
            </ion-col>
        </ion-row>
    </ion-grid>
</ion-content>

